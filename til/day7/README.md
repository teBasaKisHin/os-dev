# BIOSからキーボードの状態を入手

AHに取得したいキーボードの情報を記録，今回はシフト状態を記録したいので`MOV AH,0x02`になった．
`INT 0x16`でBIOSを呼び出し戻り値はALに保存されている

# いろいろ変更＆加筆

haribote.nasをasmhead.nasに変更して，100行ほど追加したが説明はのちのち

# C言語の導入

## C言語を機械語にする手順

cコンパイラでgasというアセンブラに変換，gasアセンブラからnasアセンブラに変換，naskからobjをつくり，objをbimにする．bimからhrbにし，hrbをsysに統合する.  
どんなファイルでもnaskに変化すればhariboteosに組み込むことができる．

# nasファイルをC言語ファイルで呼び出す

~~~
[FORMAT "WCOFF"]
~~~
アセンブラからオブジェクトファイルを出力するモードにする．

~~~
[BITS 32]
~~~
32ビット用の機械語で出力する．

## nasでの関数名定義

外部で使えるようにするためにGLOBAL命令を付けないといけない．  
また，_io_hlt()のように最初に"_"（アンダーバー）を付けないといけない．
